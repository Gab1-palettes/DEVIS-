<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AGORA â€¢ AOA Bot â€” DÃ©mo</title>
  <meta name="description" content="DÃ©mo interactive du bot AGORA (AOA) â€” devis, plan, panier, livraison. 100% front-end, prÃªte pour GitHub Pages." />
  <style>
    :root{
      --green:#0E7A5E;
      --green-dark:#0A2E2A;
      --green-soft:#E6F4EF;
      --ink:#0F172A;
      --muted:#64748B;
      --bg:#f7fbf9;
      --white:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--ink);
      background: linear-gradient(180deg, rgba(14,122,94,0.95), rgba(14,122,94,0.85)) no-repeat;
      background-attachment: fixed;
    }
    .wrap{max-width:1000px;margin:0 auto;padding:24px}
    .hero{
      display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;gap:16px;
      color:#fff;padding:24px 0 8px 0;
    }
    .brand{font-weight:800;font-size:28px;letter-spacing:.5px}
    .sub{opacity:.9;margin-top:4px}
    .cta{
      display:inline-flex;align-items:center;gap:8px;
      background:#fff;color:var(--green);padding:12px 16px;border-radius:12px;
      text-decoration:none;font-weight:700;border:0;cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,.12);
    }
    .card{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,.15)}
    .card-head{padding:18px 20px;border-bottom:1px solid #e6e8ec;background:#fff}
    .card-body{padding:16px}
    .muted{color:var(--muted);font-size:14px}
    .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px}
    @media (max-width:720px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
    .qbtn{
      border-radius:10px;border:1px solid #d8e6e1;background:var(--green-soft);color:#0b5d48;
      padding:10px 12px;font-weight:600;cursor:pointer;
    }
    .qbtn:hover{filter:brightness(0.98)}
    .chat{
      display:flex;flex-direction:column;height:62vh;max-height:72vh;border:1px solid #eef2f7;border-radius:14px;overflow:hidden;background:#fff;
    }
    .scroll{flex:1;overflow:auto;padding:14px;background:rgba(255,255,255,.95)}
    .row{display:flex;margin:8px 0}
    .bot{max-width:80%;background:#fff;border-radius:16px;padding:10px 12px;box-shadow:0 4px 12px rgba(0,0,0,.08);color:#0F172A;border:1px solid #eef2f7}
    .user{max-width:80%;background:#E8F5F0;border-radius:16px;padding:10px 12px;box-shadow:0 4px 12px rgba(0,0,0,.08);margin-left:auto;color:#0F172A;border:1px solid #d9ece5}
    .typing{color:#6b7280;font-size:14px;margin:6px 2px}
    .bar{display:flex;gap:8px;border-top:1px solid #eef2f7;padding:10px;background:#fff}
    .input{
      flex:1;border:1px solid #d1d5db;border-radius:10px;padding:10px 12px;font-size:14px;
      outline:none;
    }
    .send{
      border:0;border-radius:10px;background:var(--green);color:#fff;padding:10px 16px;font-weight:700;cursor:pointer;
    }
    .send:hover{background:#0c6b53}
    .foot{
      margin-top:16px;color:#e8fff6;font-size:12px;opacity:.9
    }
    .tips{font-size:12px;color:#64748B;margin-top:10px}
    .divider{height:1px;background:#eef2f7;margin:16px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div>
        <div class="brand">AGORA â€¢ AOA Bot</div>
        <div class="sub">DÃ©mo interactive â€” devis, plan, panier, livraison (simulation frontâ€‘end)</div>
      </div>
      <a class="cta" href="#demo">ðŸš€ Essayer la dÃ©mo</a>
    </header>

    <main id="demo" class="card">
      <div class="card-head">
        <div class="muted">Astuce : cliquez sur un bouton rapide puis envoyez un message (ex : Â«Â CrÃ©er un devis pour 4 modulesÂ Â»).</div>
      </div>
      <div class="card-body">
        <div class="grid" style="margin-bottom:10px">
          <button class="qbtn" data-intent="devis">Devis</button>
          <button class="qbtn" data-intent="plan">Plan</button>
          <button class="qbtn" data-intent="panier">Panier</button>
          <button class="qbtn" data-intent="livraison">Livraison</button>
        </div>

        <section class="chat">
          <div id="scroll" class="scroll" aria-live="polite" aria-label="Zone de messages">
            <!-- Messages injectÃ©s ici -->
          </div>
          <form id="bar" class="bar" autocomplete="off">
            <input id="inp" class="input" name="message" placeholder="Ã‰crivez un messageâ€¦" />
            <button class="send" type="submit">Envoyer</button>
          </form>
        </section>

        <div class="tips">Simulation cÃ´tÃ© client uniquement. Prix/quantitÃ©s indicatifs pour la dÃ©mo.</div>
      </div>
    </main>

    <footer class="foot">
      Un robot dÃ©veloppÃ© pour vous. 
    </footer>
  </div>

  <script>
    (function(){
      const scroll = document.getElementById('scroll');
      const form = document.getElementById('bar');
      const input = document.getElementById('inp');
      const quickButtons = document.querySelectorAll('.qbtn');

      /** State **/
      /** @type {{role:'bot'|'user', text:string}[]} */
      const messages = [
        { role:'bot', text: "Bonjour et bienvenue chez AGORA. Je peux crÃ©er un devis, un plan, constituer un panier et organiser la livraison." }
      ];

      function render(){
        scroll.innerHTML = '';
        for(const m of messages){
          const row = document.createElement('div');
          row.className = 'row';
          const bubble = document.createElement('div');
          bubble.className = (m.role === 'bot') ? 'bot' : 'user';
          bubble.textContent = m.text;
          row.appendChild(bubble);
          scroll.appendChild(row);
        }
        scroll.scrollTo({ top: scroll.scrollHeight, behavior: 'smooth' });
      }

      function botReply(userText){
        const lower = (userText || '').toLowerCase();
        let answer = "Je peux aider avec un devis, un plan, un panier et la livraison.";
        if (/(^|\\s)(devis|quote)(\\s|$)/i.test(lower)) {
          answer = "Devis crÃ©Ã© : 4 modules 845Ã—1200 mm Ã  72 â‚¬ HT lâ€™unitÃ©. Total : 288 â‚¬ HT. Voulezâ€‘vous lâ€™envoyer par email ?";
        } else if (/(plan|schÃ©ma|design)/i.test(lower)) {
          answer = "Plan gÃ©nÃ©rÃ© : modÃ¨le hexagonal 4 m (8 pers), 6 cÃ´tÃ©s, 2 entrÃ©es. Export PDF disponible.";
        } else if (/(panier|cart|ajoute|ajouter)/i.test(lower)) {
          answer = "Produit(s) ajoutÃ©(s) au panier. Souhaitezâ€‘vous appliquer la remise pro ou poursuivre au tarif particulier ?";
        } else if (/(livraison|delivery|transport|truck)/i.test(lower)) {
          answer = "Livraison express sous 72 h possible. Merci dâ€™indiquer lâ€™adresse et le crÃ©neau souhaitÃ©.";
        }
        return answer;
      }

      function send(text){
        const t = (text != null ? String(text) : input.value).trim();
        if(!t) return;
        input.value = '';
        messages.push({ role:'user', text: t });
        render();
        // typing indicator
        const tip = document.createElement('div');
        tip.className = 'typing';
        tip.textContent = "AOA est en train d'Ã©crireâ€¦";
        scroll.appendChild(tip);
        scroll.scrollTo({ top: scroll.scrollHeight, behavior: 'smooth' });
        setTimeout(() => {
          tip.remove();
          messages.push({ role:'bot', text: botReply(t) });
          render();
        }, 600);
      }

      form.addEventListener('submit', function(e){
        e.preventDefault();
        send();
      });

      quickButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const intent = btn.getAttribute('data-intent') || '';
          if(intent === 'devis') send('CrÃ©er un devis pour 4 modules');
          if(intent === 'plan') send('GÃ©nÃ©rer un plan 4 m pour 8 personnes');
          if(intent === 'panier') send('Ajoute au panier');
          if(intent === 'livraison') send('Propose une livraison');
        });
      });

      // First render
      render();
    })();
  </script>
</body>
</html>
